---
setup:
  - skip:
      features: regex

---
"Test cat shards output":

  - do:
      cat.shards: {}

  - match:
      $body: >
               /^$/

  - do:
      index:
        index:  index1
        type:   type1
        id:     1
        body:   { foo: bar }
        refresh: true

  - do:
      cat.shards: {}

  - match:
      $body: >
               /^  
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n $/

  - do:
      index:
        index:  index2
        type:   type2
        id:     1
        body:   { foo: bar }
        refresh: true

  - do:
      cat.shards.index1: {}

  - match:
      $body: >
               /^  
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n
                index1 \s \d \s [pr] \s (STARTED \s \d \s \d+k?b \s \d{1,3}.\d{1,3}.\d{1,3}.\d{1,3} \s .*|UNASSIGNED) \n $/

