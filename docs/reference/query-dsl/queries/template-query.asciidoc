[[query-dsl-template-query]]
=== Template Query

A query that accepts a query template and a map of key/value pairs to fill in
template parameters.

[source,js]
------------------------------------------
GET _search
{
    "query": {
        "template": {
            "query": {"match_{{template}}": {}},
            "params" : {
                "template" : "all"
            }
        }
    }
}

------------------------------------------


Alternatively escaping the template works as well:

[source,js]
------------------------------------------
GET _search
{
    "query": {
        "template": {
            "query": "{\"match_{{template}}\": {}}\"",
            "params" : {
                "template" : "all"
            }
        }
    }
}
------------------------------------------

You register a template by storing it in the conf/scripts directory of
elasticsearch. In order to execute the stored template reference it in the query parameters:


[source,js]
------------------------------------------
GET _search
{
    "query": {
        "template": {
            "query": "storedTemplate",
            "params" : {
                "template" : "all"
            }
        }
    }
}

------------------------------------------


Templating is based on Mustache. Substitution of tokens works as follows:


[source,js]
------------------------------------------
            "query": "{\"match_{{template}}\": {}}\"",
            "params" : {
                "template" : "all"
------------------------------------------

